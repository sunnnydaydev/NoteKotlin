# å¯ç©ºç±»å‹

kotlinå’Œjavaçš„çš„ç±»å‹ç³»ç»Ÿä¹‹é—´æœ€é‡è¦çš„åŒºåˆ«å°±æ˜¯:kotlinå¯¹å¯ç©ºç±»å‹çš„æ˜¾å¼æ”¯æŒã€‚ä¹Ÿå³ç©ºå˜é‡éœ€è¦æ˜¾å¼å¤„ç†ä¸‹ã€‚

###### 1ã€Java æ —å­ğŸŒ°

```java
/**
 * Created by sunnyDay on 2019/7/19 11:37
 */
public class Test {
    public static void main(String[] args) {
        System.out.println(strLen(null));
    }
   static private int strLen(String s) {
        return s.length();
    }
}
/**
 log -> Exception in thread "main" java.lang.NullPointerException
 
 åœ¨Javaä¸­ä¸€åŠéœ€è¦åˆ¤ç©ºå¤„ç†ï¼š
        if(s!=null){
            return s.length();
        }
*/

```
ç©ºæŒ‡é’ˆå¼‚å¸¸åœ¨javaä¸­æ˜¯è¿è¡Œæ—¶å¼‚å¸¸ï¼Œç¼–è¯‘æœŸæ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼Œæˆ‘ä»¬ä¸ºäº†é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿé€šå¸¸ä¼šæ‰‹åŠ¨ifåšåˆ¤ç©ºå¤„ç†ã€‚

åŒæ ·çš„ä¾‹å­åœ¨kotlinä¸­åˆæ˜¯æ€æ ·çš„ç»“æœå‘¢ï¼Ÿå¦‚ä¸‹->

```kotlin
/**
 * Created by sunnyDay on 2019/7/19 11:41
 *
 */
fun main() {
    println(strLen(null)) //æ­¤å¤„å‡ºç°ç¼–è¯‘æœŸErrorï¼šNull can not be value of non-null type String
}
fun strLen(s: String) = s.length
```
å¯ä»¥çœ‹å‡ºåŒæ ·çš„ç¨‹åºåœ¨kotlinä¸­ ç¼–è¯‘æœŸ ç¼–è¯‘æœŸ ç¼–è¯‘æœŸ å°±æŠ¥é”™å•¦ã€‚è¿™æ—¶ç¨‹åºæ˜¯è¿è¡Œä¸äº†çš„ã€‚

###### 2ã€Kotlinå…è®¸å¯ç©º

æˆ‘ä»¬è‹¥æƒ³è¦å˜é‡èƒ½å¤Ÿå­˜å‚¨nullå¼•ç”¨ï¼Œåªéœ€å®šä¹‰å˜é‡æ—¶åœ¨ç±»å‹åé¢æ·»åŠ â€œ?â€ç¬¦å·å³å¯ï¼Œè¿™æ ·ä½ å®šä¹‰çš„å˜é‡å°±èƒ½æ¥å—nullå¼•ç”¨å•¦å¦‚ä¸‹:

```kotlin
class Test{
    val number: Int?
    val stu: Student?
    
    fun test(name:String?){
        
    }
}
```

å›é¡¾ä¸‹ä¸Šè¿°strLenæ–¹æ³•ï¼Œs: Stringè¡¨ç¤ºsæ˜¯éç©ºStringç±»å‹ï¼Œè¿™æ ·å°±ä¿è¯äº†ç©ºæŒ‡é’ˆæ°¸è¿œä¸ä¼šå‘ç”Ÿã€‚è¦æ˜¯sçš„å€¼æ˜¯å¯ç©ºStringå¯ä»¥å®šä¹‰ä¸º s:String? 

```kotlin
 fun strLen(s: String?):Int{
    if (s==null){
        throw IllegalArgumentException("s can not be null")
    }else{
        return s.length
    }
}

// è¿™ç§å®šä¹‰å…¶å®ä½œç”¨å’Œä¸‹é¢è¿™ä¸ªæ˜¯ç›¸åŒçš„ï¼ŒæŠŠè¿è¡ŒæœŸçš„ç©ºæŒ‡é’ˆï¼Œæå‡åˆ°äº†ç¼–è¯‘æœŸï¼š

fun strLen(s: String) = s.length
```

###### 3ã€å£°æ˜å¯ç©ºåéœ€è¦æ³¨æ„

ï¼ˆ1ï¼‰æ²¡æœ‰é—®å·çš„ç±»å‹è¡¨ç¤ºè¿™ç§ç±»å‹çš„å˜é‡ä¸èƒ½å­˜å‚¨nullå¼•ç”¨ï¼Œè¿™è¯´æ˜æ‰€æœ‰å¸¸è§ç±»å‹é»˜è®¤éƒ½æ˜¯éç©ºã€‚é™¤éä½ æ˜¾å¼æ ‡è®°ä¸ºå¯ç©ºã€‚

ï¼ˆ2ï¼‰ç±»å‹æ ‡è®°ä¸ºå¯ç©ºç±»å‹åï¼Œæˆ‘ä»¬å¯¹ç±»å‹çš„å±æ€§æ–¹æ³•æ“ä½œæ—¶ä¹Ÿä¼šå—åˆ°é™åˆ¶ï¼Œä¸èƒ½ç›´æ¥è°ƒç”¨å•¦ï¼Œéœ€è¦ä½¿ç”¨å¯ç©ºç¬¦å·?æˆ–è€…éç©ºæ–­è¨€ç¬¦å·!! å¦‚ä¸‹ï¼š

```kotlin
fun strLen(s: String?) = s.length
```
ğŸ‘†ğŸ»ä¸Šé¢æ–¹æ³•ä¼šäº§ç”Ÿç¼–è¯‘æœŸErrorï¼Œç¼–è¯‘å™¨æç¤º ->

Error: Only safe (?.) or non-null asserted (!!.) calls are allowed on a nullable receiver of type String?

å¸¸è§æœ‰ä¸‰ç§è§£å†³æ–¹æ¡ˆï¼š

- ä½¿ç”¨ifè‡ªè¡Œåˆ¤ç©ºå¤„ç†
- ä½¿ç”¨å®‰å…¨æ£€æµ‹ç¬¦?
- ä½¿ç”¨éç©ºæ–­è¨€!!

```kotlin
fun strLen(s: String?) = if(s==null)0 else s.length // è‡ªè¡Œåˆ¤ç©º
fun strLen(s: String?) = s?.length // kotlin æä¾›çš„è¯­æ³•ç³–ï¼Œ ?ä½œç”¨å°±ç›¸å½“äº  if(s!=null){}
fun strLen(s: String?) = s!!.length// kotlin æä¾›çš„è¯­æ³•ç³–, !!è¿™ä¸ªç¬¦å·å°±æ˜¯ä¸ªæ–­è¨€è¯­å¥ï¼Œæ–­è¨€sä¸ä¸ºç©ºï¼Œsä¸ºç©ºç›´æ¥æŠ›å¼‚å¸¸ã€‚
```

###### 4ã€æ”¶è·

kotlin å¯¹ç©ºå€¼è¿›è¡Œäº†å‹å¥½æ˜¾ç¤ºæ”¯æŒï¼Œå¾ˆå¤§ç¨‹åº¦é¿å…äº†ç©ºæŒ‡é’ˆçš„å‡ºç°ï¼š

ï¼ˆ1ï¼‰é¦–å…ˆæä¾›äº†éç©ºç±»å‹ï¼Œéç©ºç±»å‹ä¸€å®šä¸ä¼šäº§ç”Ÿç©ºæŒ‡é’ˆçš„ã€‚

ï¼ˆ2ï¼‰å…¶æ¬¡å‡å¦‚ç¨‹åºå‘˜å®šä¹‰äº†å¯ç©ºç±»å‹çš„å˜é‡ï¼Œåœ¨ä½¿ç”¨å˜é‡æ—¶ç¼–è¯‘å™¨ä¼šè¿›è¡Œæç¤ºæˆ‘ä»¬ä½¿ç”¨ï¼Ÿæˆ–è€…ï¼ï¼ç¬¦å·ï¼Œè¿™é‡Œåˆåšäº†ä¸€å±‚ä¿æŠ¤ã€‚æŠŠè¿è¡ŒæœŸçš„ç©ºæŒ‡é’ˆæå‡åˆ°äº†ç¼–è¯‘æœŸã€‚

ï¼ˆ3ï¼‰æœ€åï¼Œé™¤éä½ è‡ªå·±è‡ªå¯»æ­»è·¯ï¼Œæ‰ä¼šå‘ç”Ÿç©ºæŒ‡é’ˆã€‚å¦‚å…ˆå®šä¹‰å˜é‡ç±»å‹å¯ç©ºï¼Œä½¿ç”¨æ—¶åˆå®ç”¨ï¼ï¼æ–­è¨€å˜é‡ä¸ä¸ºç©ºï¼Œç„¶åè‡ªå·±ä¼ é€’ç»™ç©ºå€¼ã€‚

ç»¼ä¸Šä¸‰æ­¥ï¼Œç©ºæŒ‡é’ˆåœ¨ktä¸­å‡ºç°çš„æ¦‚ç‡å°±é™ä½å¾ˆå¤šäº†ã€‚


# è¡¥å……

###### 1ã€æ³›å‹çš„å¯ç©ºæ€§

kotlinä¸­æ‰€æœ‰çš„æ³›å‹ç±»å’Œæ³›å‹å‡½æ•°çš„ç±»å‹éƒ½æ˜¯å¯ç©ºçš„ã€‚

```kotlin
/**
 * té»˜è®¤ä¸ºAnyï¼Ÿç±»å‹ï¼Œä¹Ÿå°±æ˜¯ä»»æ„å¯ç©ºç±»å‹ï¼Œä½¿ç”¨ä¹‹å‰åˆ¤ç©ºå¤„ç†ã€‚
 * */
fun <T>test(t:T){
    if (t!=null){
        println(t.toString()) 
    }
}
```

å¦‚æœä¸æƒ³è®©tä¸ºä»»æ„çš„å¯ç©ºç±»å‹éœ€è¦è§„å®šéç©ºä¸Šç•Œ

```kotlin
/**
 * té»˜è®¤ä¸ºAnyç±»å‹,ä½¿ç”¨ä¹‹å‰ä¸ç”¨åˆ¤ç©ºã€‚
 */
fun <T:Any>test(t:T){
        println(t.toString())
}
```

###### 2ã€javaçš„å¯æ§æ€§ç›¸å…³æ³¨è§£

- @NotNull  å˜é‡ä¸å¯ä¸ºnull 
- @Nullable å˜é‡å¯ä¸ºnull

```java
public class Test {
    public static void main(String[] args) {
       
    }

    public static void  test( @NotNull String name,@Nullable String sex){
        
    }
}
```
å…¶å®ä¹Ÿå°±æ˜¯ç³»ç»Ÿæ£€æµ‹åˆ°è¿™äº›æ³¨è§£çš„å˜é‡åä¼šæ£€æµ‹å˜é‡å€¼æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œä¸ç¬¦åˆæŠ›å‡ºæç¤ºã€‚

###### 3ã€å­—ç¬¦ä¸²ç›¸å…³çš„åˆ¤ç©ºæ–¹æ³•

```kotlin
fun main() {
    val s1 = ""
    s1.isBlank() 
    s1.isEmpty()
    s1.isNotBlank()
    s1.isNotEmpty()
    s1.isNullOrBlank()
    s1.isNullOrEmpty()
}
```
(1) isBlank

```kotlin
public actual fun CharSequence.isBlank(): Boolean = length == 0 || indices.all {
    this[it].isWhitespace()
}
```

å­—ç¬¦ä¸²é•¿åº¦ä¸º0æˆ–è€…å­—ç¬¦éƒ½æ˜¯ç©ºæ ¼isBlankè¿”å›trueã€‚

```kotlin
fun main() {
    println("".isBlank()) // true
    println("      ".isBlank()) // true 
}
```

(2)isEmpty

```kotlin
public inline fun CharSequence.isEmpty(): Boolean = length == 0
```
å­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯å¦ä¸º0,ä¸º0åˆ™è¿”å›true

(3) isNullOrBlank

```kotlin
public inline fun CharSequence?.isNullOrBlank(): Boolean {
    contract {
        returns(false) implies (this@isNullOrBlank != null)
    }
    // æ ¸å¿ƒå¤„ç†ï¼Œé’ˆå¯¹ç©ºå…ˆè¿›è¡Œäº†å¤„ç†
    return this == null || this.isBlank()
}
```
å­—ç¬¦ä¸²ä¸ºnullæˆ–è€…Blankåˆ™è¿”å›true

(4)isNullOrEmpty

å­—ç¬¦ä¸²ä¸ºnullæˆ–è€…é•¿åº¦ä¸º0åˆ™è¿”å›true

