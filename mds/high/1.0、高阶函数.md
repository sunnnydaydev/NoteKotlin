### ä¸€ã€é«˜é˜¶å‡½æ•°

> kotlinä¸­é™¤äº†Intã€Numberã€Stringç­‰å¸¸è§çš„æ•°æ®ç±»å‹ä¹‹å¤–åˆåŠ å…¥äº†ä¸€ç§æ–°çš„æ•°æ®ç±»å‹å³å‡½æ•°ç±»å‹ã€‚kotlinä¸­æ¯ä¸ªå‡½æ•°éƒ½æœ‰ç‰¹å®šçš„å‡½æ•°ç±»å‹ã€‚

###### 1ã€kotlinçš„å‡½æ•°

kotlinçš„å‡½æ•°çœ‹ç€æ‰åƒæ ‡å‡†çš„"è¾“å…¥è¾“å‡º"å‡½æ•°ï¼Œå› ä¸ºè¾“å…¥åœ¨å‰è¾“å‡ºåœ¨åï¼Œçœ‹ä¸ªæ™®é€šå‡½æ•°çš„ğŸŒ°

```kotlin
fun sum(num1: Int, num2: Int): Int {
    return num1 + num2
}
```

å¦‚ä¸Š,å‡½æ•°çš„å‚æ•°å°±æ˜¯è¾“å…¥ï¼Œè¿”å›å€¼ç±»å‹å°±æ˜¯è¾“å‡ºã€‚å‚æ•°åœ¨å‰è¿”å›å€¼åœ¨åè¿™å°±æ˜¯æ ‡å‡†çš„è¾“å…¥è¾“å‡ºæ€æƒ³ã€‚

ä¸ºå•¥å…ˆè®²ä¸‹è¿™ä¸ªå‘¢ï¼Ÿå› ä¸ºæˆ‘æ„Ÿè§‰äº†è§£äº†æ ‡å‡†è¾“å…¥è¾“å‡ºæ€æƒ³æœ‰åŠ©äºæˆ‘ä»¬å¯¹å‡½æ•°ç±»å‹çš„ç†è§£~

###### 2ã€å‡½æ•°ç±»å‹ğŸŒ°

```kotlin
fun getString(n: Int): Int {}
```

å¦‚ä¸Šå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„kotlinæ–¹æ³•ï¼Œå…¶å‡½æ•°ç±»å‹ä¸ºï¼ˆIntï¼‰->Intã€‚æˆ‘ä»¬å¯ä»¥æŠŠå‡½æ•°ç±»å‹çœ‹åšä¸Intã€Stringç­‰åŒç­‰çº§çš„ä¸€ç§æ–°çš„ç±»å‹ã€‚å‡½æ•°ç±»å‹çš„è¯­æ³•è¡¨ç¤ºå¦‚ä¸‹ï¼š

```kotlin
(å‚æ•°ç±»å‹)->è¿”å›å€¼ç±»å‹
```

å¯ä»¥çœ‹åˆ°é«˜é˜¶å‡½æ•°ä¹Ÿæ˜¯æ ‡å‡†çš„è¾“å…¥è¾“å‡ºå‡½æ•°:å°æ‹¬å·å†…å°±æ˜¯"è¾“å…¥",è¿”å›å€¼ç±»å‹å°±æ˜¯"è¾“å‡º"ã€‚

å› æ­¤é’ˆå¯¹ä»»æ„ä¸€ä¸ªæ–¹æ³•æˆ‘ä»¬éƒ½èƒ½è¯´å‡ºå…¶å‡½æ•°ç±»å‹ï¼š

```kotlin
   //(String)->Unit
fun test1(name: String) {}

//(String)->String
fun test2(name: String): String {
    return ""
}

//(String,Int)->Long
fun test3(name: String, age: Int): Long {
    return 3L
}

//(String,List<String>)->Int
fun test4(name: String, list: List<String>): Int {
    return 3L
}
```

###### 3ã€å‡½æ•°ç±»å‹çš„ä½œç”¨

æ—¢ç„¶å‡½æ•°ç±»å‹ä¸Stringã€Intã€Byteç­‰ç±»å‹å¹¶åˆ—ä¸ºkotlinä¸­çš„æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆå‡½æ•°ç±»å‹åŒæ ·å…·å¤‡å¦‚ä¸‹åŠŸèƒ½ï¼š

- ä½œä¸ºå˜é‡ä½¿ç”¨ï¼ˆæˆå‘˜æˆ–å±€éƒ¨ï¼‰
- ä½œä¸ºå½¢å‚ä½¿ç”¨
- ä½œä¸ºæ–¹æ³•è¿”å›å€¼ä½¿ç”¨

###### 4ã€å‡½æ•°ç±»å‹çš„å®šä¹‰èµ‹å€¼ä½¿ç”¨

ï¼ˆ1ï¼‰å®šä¹‰

å‡½æ•°ç±»å‹å˜é‡çš„å®šä¹‰ä¹Ÿæ˜¯ç±»ä¼¼æ ‡å‡†çš„"è¾“å…¥è¾“å‡º"æ–¹å¼å®šä¹‰ï¼Œçœ‹ä¸ªğŸŒ°

```kotlin
fun main() {
    val methodAction: () -> String
}
```

å…ˆçœ‹ä¸‹è¿™æ®µä»£ç ä»£è¡¨çš„æ„æ€ï¼šå®šä¹‰ä¸ªå‡½æ•°ç±»å‹çš„å˜é‡methodActionã€‚methodActionå°±æ˜¯å˜é‡åï¼Œå˜é‡ç±»å‹ä¸º() -> String

ï¼ˆ2ï¼‰èµ‹å€¼

å¸¸è§çš„èµ‹å€¼æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯å…ˆå®šä¹‰å˜é‡ï¼Œç„¶åå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼š

```kotlin
    val methodAction: () -> String
methodAction = {
    "è¿”å›å€¼"
}
```

å¦ä¸€ç§æ˜¯å®šä¹‰å˜é‡æ—¶ç›´æ¥èµ‹å€¼ï¼š

```kotlin
    val methodAction: () -> String = {
    "è¿”å›å€¼"
}
```

è¿™ä¸ªæ„Ÿè§‰å’Œktçš„è¿™ç§æ–¹æ³•ç±»ä¼¼:å³é¢çš„ç»“æœå°±æ˜¯å·¦é¢ç±»å‹è¿”å›å€¼

```kotlin
//å®Œæ•´å†™æ³•fun sum(num1: Int, num2: Int):Int = num1 + num2
fun sum(num1: Int, num2: Int) = num1 + num2
```

å…¶å®å³é¢çš„{} è¿˜æœ‰ä¸ªåå­—å«lambdaè¡¨è¾¾å¼ï¼ˆæ— å‡½æ•°åçš„é«˜é˜¶å‡½æ•°ï¼‰ï¼Œå°±æ˜¯æ²¡æœ‰åå­—çš„é«˜é˜¶å‡½æ•°ã€‚å¸¸è§çš„æœ‰å¦‚ä¸‹å‡ ç§ï¼š

```kotlin
//1ã€æ— å‚æ•°ï¼Œè¿”å›å€¼ç±»å‹ä¸ºUnitçš„åŒ¿åå‡½æ•°
{}
//2ã€æœ‰å‚æ•°ï¼Œè¿”å›å€¼ç±»å‹ä¸ºStringçš„åŒ¿åå‡½æ•°
{
    "æˆ‘æ˜¯è¿”å›å€¼"
}
//3ã€æœ‰å‚æ•°ï¼Œè¿”å›å€¼ç±»å‹ä¸ºStringçš„åŒ¿åå‡½æ•°
{ name:String ->
    "æˆ‘æ˜¯è¿”å›å€¼:$name"
}
```
- {}çš„å‡½æ•°ç±»å‹ä¸º ()->Unit
- {"æˆ‘æ˜¯è¿”å›å€¼"}çš„å‡½æ•°ç±»å‹ä¸º ()->String
- { name:String ->"æˆ‘æ˜¯è¿”å›å€¼:$name"}çš„å‡½æ•°ç±»å‹ä¸º (String)->String

åˆ°è¿™é‡Œåº”è¯¥æ˜ç™½ğŸŒ°æ —å­ä¸­é«˜é˜¶å‡½æ•°å·¦å³çš„å¯¹ç­‰å…³ç³»äº†å§

```kotlin
    val methodAction: () -> String = { "è¿”å›å€¼" }
```

ï¼ˆ3ï¼‰ä½¿ç”¨

ä½¿ç”¨å°±å¾ˆç®€å•å•¦ï¼Œå¸¸è§çš„æœ‰ä¸¤ç§è°ƒç”¨æ–¹å¼

```kotlin
    val methodAction: () -> String = {
      "è¿”å›å€¼"
    }
    //ä¸¤ç§ä½¿ç”¨é«˜é˜¶å‡½æ•°æ–¹å¼:
    methodAction.invoke()
    methodAction()
```

###### 5ã€é«˜é˜¶å‡½æ•°çš„ä½¿ç”¨

ï¼ˆ1ï¼‰æ —å­ğŸŒ°

```kotlin
class MainActivity {
    //æ¨¡æ‹ŸonCreate
    fun onCreate() {
        ItemAdapter(::onViewClick)
    }

    private fun onViewClick(id:Int){
        println("ä½ ç‚¹å‡»äº†id")
    }
}

class ItemAdapter(private val onItemClick: (id: Int) -> Unit = {}) {
    //æ¨¡æ‹ŸViewæ¸²æŸ“å®Œæˆ
    fun onViewUpdate(id: Int) {
        onItemClick.invoke(id)//æˆ–è€…onItemClick(id)
    }
}
```
ä¸€ä¸ªAndroidä¸­å¸¸è§çš„ä¾‹å­ï¼ŒRecyclerViewçš„ç‚¹å‡»äº‹ä»¶å›è°ƒï¼Œä½¿ç”¨é«˜é˜¶å‡½æ•°å®Œå…¨å¯ä»¥åšåˆ°ï¼Œä»£æ›¿äº†æ¥å£å›è°ƒã€‚ä¸Šé¢æœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„

- val onItemClick: (id: Int) -> Unit = {} è¿™é‡Œ{}ä¸­éšå«ä¸ªå˜é‡it,å®Œæ•´å†™æ³•æ˜¯è¿™æ ·çš„val onItemClick: (id: Int) -> Unit = {it->}
å‡å¦‚ç­‰å·é«˜é˜¶å‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°lambdaè¡¨è¾¾å¼é»˜è®¤å‚æ•°ä¸ºitå¯çœç•¥ä¸å†™ã€‚
- lambdaè¡¨è¾¾æ˜¯æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œè¿”å›å€¼é»˜è®¤ä¸ºè¡¨è¾¾å¼çš„æœ€åä¸€è¡Œè¯­å¥
- æ³¨æ„è¿™é‡Œæœ‰ä¸€ä¸ªæ–°çš„æ“ä½œç¬¦::è¿™ä¸ªæ“ä½œç¬¦å¸¦ä¸Šå‡½æ•°åå°±ä»£è¡¨æŠŠæ™®é€šå‡½æ•°å½“åšå…¶å‡½æ•°ç±»å‹å¼•ç”¨

(2)æ —å­ğŸŒ°

è¿˜æ˜¯ä¸Šè¿°ä¾‹å­ï¼Œä¸ç”¨::è¿˜æœ‰ç§å†™æ³•

```kotlin
class MainActivity {
    fun onCreate() {
        ItemAdapter().apply {
            onItemClick = {
                println("ä½ ç‚¹å‡»äº†$it")
            }
        }
    }
}

class ItemAdapter {
    var onItemClick: (id: Int) -> Unit = {}
    fun onViewUpdate(id: Int) {
        onItemClick.invoke(id)
    }
}
```

ï¼ˆ3ï¼‰æ —å­ğŸŒ°

 å®šä¹‰ä¸ªé«˜é˜¶å‡½æ•°ï¼Œæ ¹æ®ä¼ å…¥çš„å‡½æ•°ç±»å‹å†³å®šæ±‚ä¸¤æ•°ä¹‹å’Œè¿˜æ˜¯ä¸¤æ•°ä¹‹å·®

```kotlin

fun test(num1: Int, num2: Int, fun1: (Int, Int) -> Int) {
    val result = fun1(num1, num2) 
    println(result)
}

//æ±‚å’Œæ™®é€šå‡½æ•°
fun plus(num1: Int, num2: Int): Int {
    return num1 + num2
}
//æ±‚å·®æ™®é€šå‡½æ•°
fun minus(num1: Int, num2: Int): Int {
    return num1 - num2
}
```

```kotlin
fun main() {
    // è¿™é‡Œç¬¬3ä¸ªå‚æ•°ä¼ é€’å…¶ä»–å‡½æ•°æ—¶ï¼Œç»“æœå¯èƒ½ä¸åŒ:
    println(test(10, 5, ::plus))//15
    println(test(10, 5, ::min))//5
}
```

# äºŒã€åŒ¿åé«˜é˜¶å‡½æ•°lambdaè¡¨è¾¾å¼

Lambda æœ¬è´¨æ˜¯ä¸€ç§åŒ¿åå‡½æ•°ï¼Œä½œä¸ºè¡¨è¾¾å¼å®ƒçš„è¿è¡Œç»“æœå¯ä»¥ä½œä¸ºè¡¨è¾¾å¼ã€å½¢å‚ã€å’Œå‡½æ•°è¿”å›å€¼ã€‚è¯­æ³•å¦‚ä¸‹:

```kotlin
{å‚æ•°:å‚æ•°ç±»å‹-> Lambdaè¡¨è¾¾å¼ä½“}
```

###### 1ã€lambdaæœ‰å¦‚ä¸‹è§„åˆ™

- å®šä¹‰ Lambda è¡¨è¾¾å¼ä½œä¸ºä¸€ä¸ªæ–¹æ³•ï¼Œä¸éœ€è¦ fun å…³é”®å­—ï¼Œä¹Ÿæ— é¡»æŒ‡å®šæ–¹æ³•å
- å¦‚æœlambdaè¡¨è¾¾å¼æœ‰å½¢å‚åˆ—è¡¨ï¼Œå‚æ•°è¦æ”¾åœ¨ -> å·¦é¢ï¼Œå‚æ•°ç±»å‹å¯ä»¥çœç•¥ã€‚
- lambdaå‡½æ•°ä½“æ”¾åœ¨ -> å³é¢
- å‡½æ•°çš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼é»˜è®¤ä¸º Lambda çš„è¿”å›å€¼ï¼Œä¸”æ— é¡» return å…³é”®å­—

###### 2ã€kotlinä¸­çš„lambdaè§„å®š
è¿™é‡Œå°±ä»¥kotlinçš„æ ‡å‡†å‡½æ•°letå‡½æ•°æ¥ä¸¾ä¸ªæ —å­æ¥ä»‹ç»ä¸‹ä¸‰æ¡è§„å®šã€‚

```kotlin
// è¯­æ³•(studentä¸ºä»»æ„å¯¹è±¡ï¼Œä»»æ„å¯¹è±¡éƒ½æœ‰è¿™ä¸ªletæ–¹æ³•)
student?.let {
    //todo code.
}

/**
åˆæ¬¡è§è¿™ä¸ªä¸œè¥¿å¯èƒ½ä¼šçœ‹ä¸æ‡‚ï¼Œå…¶å®ä»£ç æ˜¯è¿™æ ·å˜æ¢æ¥çš„ï¼Œå®Œæ•´å†™æ³•ï¼š
 */
student?.let({// lambda è¡¨è¾¾å¼ä½œä¸ºæ–¹æ³•å‚æ•°
        it: Student ->
    // todo code
})
/**
å¯è§let()æ–¹æ³•éœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªlambdaè¡¨è¾¾å¼ã€‚

kotlinä¸­è§„å®š1ï¼šå½“lambdaè¡¨è¾¾å¼æ˜¯å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ—¶ï¼Œå¯å°†lambdaè¡¨è¾¾å¼ç§»åŠ¨åˆ°æ‹¬å·å¤–é¢ã€‚
ä»£ç è¿›è¡Œå˜æ¢ï¼š
 */
student?.let() { it: Student ->
}
/**
kotlinä¸­è§„å®š2ï¼šå¦‚æœlambdaè¡¨è¾¾å¼æ˜¯å‡½æ•°çš„â€œå”¯ä¸€â€å‚æ•°ï¼Œè¿˜å¯ä»¥å°†å‡½æ•°çš„æ‹¬å·çœç•¥ã€‚
ä»£ç å†æ¬¡è¿›è¡Œå˜æ¢ï¼š
 */
student?.let { it: Student ->
}
/**
kotlinä¸­è§„å®š3ï¼šå½“â€œlambdaè¡¨è¾¾å¼â€çš„å‚æ•°åˆ—è¡¨ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ï¼Œä¹Ÿä¸å¿…å£°æ˜å‚æ•°åï¼Œå¯ä»¥ä½¿ç”¨itå…³é”®å­—ä»£æ›¿ã€‚

ä»£ç å†æ¬¡å˜æ¢ï¼š
 */
student?.let {
}
/**
ç»è¿‡ä¸Šé¢çš„å‡ æ­¥å˜æ¢ååŸºæœ¬å¾ˆç²¾ç®€äº†
 */

```

