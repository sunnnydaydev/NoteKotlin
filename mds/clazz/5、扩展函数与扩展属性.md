# æ‰©å±•çš„æ¦‚å¿µ

kotlinæä¾›äº†ä¸¤ç§â€œæ‰©å±•â€ï¼Œä¹Ÿå³æ‰©å±•å‡½æ•°ã€æ‰©å±•å±æ€§ã€‚ä½¿ç”¨Kotlinçš„â€œæ‰©å±•â€æˆ‘ä»¬èƒ½å¤Ÿæ‰©å±•ä¸€ä¸ªç±»çš„æ–°åŠŸèƒ½è€Œæ— éœ€ç»§æ‰¿è¯¥ç±»æˆ–è€…ä½¿ç”¨åƒè£…é¥°è€…è¿™æ ·çš„è®¾è®¡æ¨¡å¼ã€‚æˆ‘
ä»¬ç”šè‡³å¯ä»¥ä¸ºä¸€ä¸ªä¸èƒ½ä¿®æ”¹çš„ã€æ¥è‡ªç¬¬ä¸‰æ–¹åº“ä¸­çš„ç±»ç¼–å†™ä¸€ä¸ªæ–°çš„å‡½æ•°ã€å¢æ·»æ–°çš„å±æ€§ã€‚è¿™ä¸ªæ–°å¢çš„å‡½æ•°ã€å±æ€§"å°±åƒ"é‚£ä¸ªåŸå§‹ç±»æœ¬æ¥å°±æœ‰çš„ä¸€æ ·ã€‚

# æ‰©å±•å‡½æ•°

###### 1ã€å¦‚ä½•å®šä¹‰æ‰©å±•å‡½æ•°

é¦–å…ˆè¿™é‡Œè¦æ˜ç™½ä¸€ç‚¹ï¼Œæ‰©å±•å‡½æ•°ä¹Ÿæ˜¯å‡½æ•°çš„ä¸€ç§ï¼Œæ‰€ä»¥å‡½æ•°çš„å®šä¹‰ä¹Ÿéµå¾ªkotlinæ™®é€šå‡½æ•°å®šä¹‰æ–¹å¼ï¼Œåªæ˜¯å’Œæ™®é€šå‡½æ•°æœ‰ç‚¹åŒºåˆ«ï¼Œå°±æ˜¯å®šä¹‰å‡½æ•°åæ—¶å‰é¢åŠ ä¸Šè¦æ‰©å±•çš„ç±»åå³å¯ã€‚

```kotlin
//æ‰©å±•å‡½æ•°å®šä¹‰è¯­æ³•
æƒé™ä¿®é¥°ç¬¦ fun è¦æ‰©å±•çš„ç±»å.è‡ªå®šä¹‰å‡½æ•°å():è¿”å›å€¼ç±»å‹{
  // æ–¹æ³•ä½“
}
```

æ¥ä¸‹æ¥å°±çœ‹çœ‹å¦‚ä½•ä¸ºAnimalç±»æ·»åŠ ä¸€ä¸ªæ‰©å±•å‡½æ•°ï¼Œé¦–å…ˆçœ‹çœ‹è‡ªå®šä¹‰Animalç±»ï¼š

```kotlin
/**
 * Created by ZhangBiao on 2022/3/7 18:08:52
 */
class Animal {
    private var name = ""
    private var type = ""

    fun setName(name: String) {
        this.name = name
    }

    fun getName(): String {
        return name
    }

    fun setType(type: String) {
        this.type = type
    }

    fun getType(): String {
        return type
    }
}
```

å¯ä»¥çœ‹åˆ°è¿™ä¸ªç±»å°±æœ‰ä¸ªgetã€setæ–¹æ³•ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä½¿ç”¨æ‰©å±•å‡½æ•°ä¸ºå®ƒæ·»åŠ ä¸€ä¸ªå«descçš„æ–¹æ³•ã€‚

```kotlin
class VarTest{
    /**
     * ä¸ºAnimalå®šä¹‰ä¸€ä¸ªæ‰©å±•å‡½æ•°
     * */
    fun Animal.desc(){
        // this.getName()
        // this.setName("")
        println("i am animal:")
    }

    /**
     * ä½¿ç”¨æ‰©å±•å‡½æ•°
     * */
    fun test(){
        Animal().desc()
    }
}
```

å¯è§å®šä¹‰æ‰©å±•å‡½æ•°å¤ªç®€å•äº†ï¼Œçœ‹èµ·æ¥åªæ˜¯åœ¨æ™®é€šçš„å‡½æ•°ä¸Šæ·»åŠ äº†ç±»åã€‚

åœ¨æ‰©å±•å‡½æ•°ä½œç”¨åŸŸèŒƒå›´å†…å¯ä»¥é€šè¿‡thisè®¿é—®æœ¬ç±»çš„å±æ€§ã€æ–¹æ³•ã€‚ç»†ç»†æƒ³æƒ³ä¹Ÿå¾ˆå¥½ç†è§£ã€‚è¿™ä¸ªæ–¹æ³•å°±å½“åšåŸå§‹ç±»ä¸­å®šä¹‰çš„ï¼Œæ‰€ä»¥åŸå§‹ç±»çš„æ–¹æ³•ä¸­ä¸€èˆ¬ä½¿ç”¨thiséƒ½æ˜¯ä»£è¡¨å½“å‰å¯¹è±¡ã€‚

###### 2ã€æ‰©å±•å‡½æ•°çš„åŸç†

æˆ‘ä»¬å¯ä»¥ä»¥ä¸Šè¿°çš„ä»£ç ä¸ºæ —å­çœ‹ä¸‹MainActivityä»£ç ç¼–è¯‘åçš„å­—èŠ‚ç ï¼š

```java
public final class VarTest {
    
    public final void desc(@NotNull Animal $this$desc) {
        Intrinsics.checkNotNullParameter($this$desc, "$this$desc");
        String var2 = "i am animal:";
        System.out.println(var2);
    }

    public final void test() {
        this.desc(new Animal());
    }
}
```

å¯è§åœ¨VarTestç±»ä¸­å®šä¹‰ä¸€ä¸ªAnimalçš„æ‰©å±•å‡½æ•°ï¼Œä»£ç è¢«ç¼–è¯‘æˆå­—èŠ‚ç ååˆ™æ˜¯ä¸ºVarTestå¢åŠ äº†ä¸€ä¸ªæ™®é€šçš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦æŠŠè¢«æ‰©å±•çš„ç±»ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œ
è¿™æ ·åœ¨æ‰©å±•æ–¹æ³•ä½œç”¨åŸŸå†…å³å¯ä½¿ç”¨å¯¹è±¡æ“ä½œå±æ€§äº†ã€‚

åœ¨å®é™…è°ƒç”¨descæ–¹æ³•æ—¶å…¶å®æ˜¯å§è°ƒç”¨å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™descæ–¹æ³•ã€‚

å¯è§æ‰©å±•ä¸èƒ½çœŸæ­£çš„ä¿®æ”¹ä»–ä»¬æ‰€æ‰©å±•çš„ç±»ã€‚é€šè¿‡å®šä¹‰ä¸€ä¸ªæ‰©å±•ï¼Œä½ å¹¶æ²¡æœ‰åœ¨ä¸€ä¸ªç±»ä¸­æ’å…¥æ–°æˆå‘˜ï¼Œ ä»…ä»…æ˜¯å¯ä»¥é€šè¿‡è¯¥ç±»å‹çš„å˜é‡ç”¨ç‚¹è¡¨è¾¾å¼å»è°ƒç”¨è¿™ä¸ªæ–°å‡½æ•°ã€‚

å†çœ‹ä¸ªğŸŒ°

```kotlin
class Person{
    fun test(){
        Animal().desc()// ç¼–è¯‘ä¸é€šè¿‡ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
    }
}
```
çº³å°¼ï¼Ÿåœ¨VarTestä¸­å®šä¹‰çš„æ‰©å±•å‡½æ•°Personç±»ä¸­ä¸èƒ½ç”¨ï¼Ÿï¼Ÿï¼Ÿ  å“ˆå“ˆå“ˆå“ˆ çœ‹è¿‡æ‰©å±•å‡½æ•°çš„åŸç†åæˆ‘ä»¬åº”è¯¥æ˜ç™½äº†å§Personç±»ä¸­éƒ½æ²¡æœ‰descæ–¹æ³•ã€‚

é‚£ä¹ˆå¦‚ä½•åœ¨å…¶ä»–ç±»ä¸­ä¹Ÿèƒ½è°ƒç”¨æ‰©å±•å‡½æ•°å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œæˆ‘ä»¬åªéœ€æŠŠæ‰©å±•å‡½æ•°å®šä¹‰ä¸ºé¡¶å±‚æ–¹æ³•å³å¯ï¼Œé¡¶å±‚æ–¹æ³•ä¸ºé™æ€æ–¹æ³•å…¶ä»–ç±»éƒ½å¯ä½¿ç”¨ï¼Œå¥½äº†æˆ‘ä»¬å°±åœ¨VarTest.kt
è¿™ä¸ªktæ–‡ä»¶ä¸­å®šä¹‰è¿™ä¸ªæ–¹æ³•çœ‹ä¸‹æºç ï¼š

```java
public final class VarTestKt {
   public static final void desc(@NotNull Animal $this$desc) {
      Intrinsics.checkNotNullParameter($this$desc, "$this$desc");
      String var1 = "i am animal:";
      System.out.println(var1);
   }
}

public final class VarTest {
    public final void test() {
        VarTestKt.desc(new Animal());
    }
}

public final class Person {
    public final void test() {
        VarTestKt.desc(new Animal());
    }
}
```

å¯è§å¦‚é¢„æœŸï¼Œåœ¨VarTestKtä¸­å®šä¹‰æ‰©å±•æ–¹æ³•å³å¯ï¼ˆä»»æ„ç±»çš„é¡¶å±‚å³å¯ï¼‰ç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„javaä»£ç æ˜¯ä¸ºVarTestKtç±»ç”Ÿæˆäº†ä¸€ä¸ªé™æ€æ–¹æ³•ã€‚å…¶ä»–ç±»ä¸­ä½¿ç”¨æ—¶éƒ½æ˜¯é™æ€
è°ƒç”¨


###### 3ã€æ‰©å±•å‡½æ•°ä¸æ”¯æŒå¤šæ€

```kotlin
open class Shape

class Rectangle:Shape()

// ä¸ºShapeç±»å¢åŠ ä¸€ä¸ªæ‰©å±•å‡½æ•°ï¼Œå‡½æ•°ågetName
private fun Shape.getName()= "Shape"
// ä¸ºRectangleç±»å¢åŠ ä¸€ä¸ªæ‰©å±•å‡½æ•°ï¼Œå‡½æ•°ågetName
private fun Rectangle.getName()= "Rectangle"

// å®šä¹‰ä¸€ä¸ªæ™®é€šæ–¹æ³•ï¼Œå‚æ•°ä¸ºshape
private fun printName(shape: Shape){
    println("name:${shape.getName()}")
}

class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        // Test log: I/System.out: name:Shape
        printName(Rectangle())
    }
}
```

printNameæ–¹æ³•è°ƒç”¨ä¹‹åæ‰“å°çš„ç«Ÿç„¶æ˜¯â€œShapeâ€ï¼Œç”±äºæˆ‘ä»¬æ¥è§¦è¿‡å¤šæ€æ€æƒ³ï¼Œè¿™é‡Œé¦–å…ˆæƒ³åˆ°çš„æ˜¯ä¼šæ‰“å°â€œRectangleâ€ã€‚

å…¶å®å¯¹äºæ‰©å±•å‡½æ•°å®˜æ–¹æœ‰è¿™æ ·ä¸€å¥è¯ï¼š

â€œæ‰©å±•å‡½æ•°æ˜¯é™æ€åˆ†å‘çš„ï¼Œå³ä»–ä»¬ä¸æ˜¯æ ¹æ®æ¥æ”¶è€…ç±»å‹çš„è™šæ–¹æ³•ã€‚ è¿™æ„å‘³ç€è°ƒç”¨çš„æ‰©å±•å‡½æ•°æ˜¯ç”±å‡½æ•°è°ƒç”¨æ‰€åœ¨çš„è¡¨è¾¾å¼çš„ç±»å‹æ¥å†³å®šçš„ï¼Œ è€Œä¸æ˜¯ç”±è¡¨è¾¾å¼è¿è¡Œæ—¶æ±‚
å€¼ç»“æœå†³å®šçš„â€

å¬ç€è¿˜æŒºä¸å¥½ç†è§£çš„ï¼Œå…¶å®å¯ä»¥è®°ä½ä¸€å¥è¯å°±è¡Œâ€œæ‰©å±•å‡½æ•°ä¸æ”¯æŒå¤šæ€â€ ã€‚ä¸ºå•¥è¿™æ ·è¯´å‘¢ï¼Ÿä¸Šé¢äº†è§£è¿‡æ‰©å±•å‡½æ•°çš„åŸç†äº†ï¼Œé‚£ä¹ˆä»£ç æˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£ï¼š

```kotlin
open class Shape

class Rectangle:Shape()

// MainActivity ä¸­å®šä¹‰äº†getName(shape: Shape)æ–¹æ³•
private fun getName(shape: Shape)= "Shape"
// MainActivity ä¸­å®šä¹‰äº†getName(rectangle: Rectangle)æ–¹æ³•
private fun getName(rectangle: Rectangle)= "Rectangle"

// å®šä¹‰ä¸€ä¸ªæ™®é€šæ–¹æ³•ï¼Œå‚æ•°ä¸ºshapeï¼Œå†…éƒ¨è°ƒç”¨çš„getName(shape: Shape)
private fun printName(shape: Shape){
    println("name:${getName(shape)}")
}

class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        // MainActivityç±»ä¸­çš„ä¸åŒæ–¹æ³•è°ƒç”¨ï¼ˆåˆä¸æ˜¯è°ƒç”¨Rectangleæˆ–è€…Rectangleçš„æ–¹æ³•ï¼‰ï¼Œä¸å­˜åœ¨å¤šæ€ã€‚
        printName(Rectangle())//è¿™é‡Œä¼šå‘ä¸Šè½¬å‹ï¼Œè½¬ä¸ºshapeå¯¹è±¡ã€‚
    }
}
```

çœ‹è¿‡ä¸Šè¿°ä»£ç åå°±ä¸€ä¸‹å­æ˜ç™½äº†å§,åªæ˜¯è°ƒç”¨äº†MainActivityç±»ä¸­çš„ä¸åŒæ–¹æ³•è€Œå·²ï¼Œï¼Œï¼Œï¼Œè°ƒç”¨çš„æ–¹æ³•å¹¶ä¸æ˜¯Rectangleæˆ–è€…Shapeä¸­çš„ï¼Œä½•æ¥çš„å¤šæ€å‘¢ï¼Ÿ

# ä¼´ç”Ÿå¯¹è±¡çš„æ‰©å±•

å’Œæ™®é€šå‡½æ•°çš„æ‰©å±•ä¸€æ ·ï¼Œç›¸å½“äºæ‰©å±•é™æ€æ–¹æ³•ï¼Œæ‰©å±•åå¯é€šè¿‡ç±»åè°ƒç”¨~

```kotlin
class Animal {
    var test = ""
    private var name = ""

    private var type = ""

    fun setName(name: String) {
        this.name = name
    }

    fun getName(): String {
        return name
    }

    companion object
}
```



```kotlin
class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        //ä½¿ç”¨
        Log.i("MainActivity", Animal.desc())
    }
    // å®šä¹‰
    private fun Animal.Companion.desc():String = "this is animal"
}
```



# æ‰©å±•å±æ€§

æ‰©å±•å±æ€§ä¸€èˆ¬ä½¿ç”¨ä¸å¤šï¼Œå®šä¹‰å’Œæ‰©å±•å‡½æ•°ç±»ä¼¼ï¼Œç›´æ¥æ‰©å±•ç±»å.å±æ€§åï¼Œè¿™é‡Œç»“åˆæ —å­ä»¥åŠæ³¨æ„ç‚¹æ¥æ€»ç»“ä¸‹ï¼š

è¿˜æ˜¯VarTest.kt æ–‡ä»¶ï¼Œå®šä¹‰ä¸ªæµ‹è¯•ç±»

```kotlin
/**
 * Created by ZhangBiao on 2022/3/7 18:08:52
 */
class Animal {
    var test =""
    private var name = ""

    fun setName(name: String) {
        this.name = name
    }

    fun getName(): String {
        return name
    }
}
```

###### 1ã€æ‰©å±•å±æ€§ä¸èƒ½æœ‰åˆå§‹å€¼

è¿˜æ˜¯VarTest.kt æ–‡ä»¶ï¼Œå®šä¹‰é¡¶å±‚å±æ€§

```kotlin
// å®šä¹‰æ‰©å±•å±æ€§ï¼Œç›´æ¥èµ‹å€¼è¿™é‡ŒæŠ¥é”™ï¼š
//Extension property cannot be initialized because it has no backing field
// æ‰©å±•å±æ€§ä¸èƒ½è¢«åˆå§‹åŒ–å› ä¸ºæ— â€œå¹•åå­—æ®µâ€
private var Animal.type = "adfs"
```

é‚£ä¹ˆå¦‚ä½•æ‰èƒ½è·å–æ‰©å±•å±æ€§çš„å€¼å‘¢ï¼Ÿå¯ä»¥æœ‰å¦‚ä¸‹åšæ³•ï¼š

```kotlin
    var Animal.type: String
    get() = "fish" //1ã€get ç›¸å½“äºèµ‹å€¼
    set(value) {
        //field = value //2ã€field ä¸èƒ½ç”¨ï¼Œ type æ— æ³•é€šè¿‡field æ›´æ”¹
        test = "hahha" // å¯ä»¥æ›´æ”¹å…¶ä»–å±æ€§å€¼
    }
```


æºç ï¼š

```java
public final class VarTestKt {
   private static final String getType(Animal $this$type) {
      return "fish";
   }

   private static final void setType(Animal $this$type, String value) {
      $this$type.setTest("hahha");
   }
}
```

- æ‰©å±•å±æ€§ä¸èƒ½ç”¨ `field` å…³é”®å­—æ˜¾å¼è®¿é—®å¹•åå­—æ®µã€‚
- æ‰©å±•åªè¯»å±æ€§å¿…é¡»æä¾› getter æ–¹æ³•ï¼Œ æ‰©å±•è¯»å†™å±æ€§å¿…é¡»æä¾› getterã€setter æ–¹æ³•ã€‚

# æ‰©å±•å‡½æ•°ä¸é«˜é˜¶å‡½æ•°

```kotlin
open class Shape
  
// å®šä¹‰ä¸€ä¸ªæ‰©å±•å‡½æ•°ï¼Œæ‰©å±•å‡½æ•°çš„å‚æ•°ä¸ºé«˜é˜¶å‡½æ•°ï¼Œé«˜é˜¶å‡½æ•°ç±»å‹ä¸ºShapeç±»çš„æ— å‚æ‰©å±•å‡½æ•°ç±»å‹ã€‚
// é«˜é˜¶å‡½æ•°ä½œä¸ºå‚æ•°
private fun Shape.test(block:Shape.()->Unit){
    println("i am a test method.")
    block()    // æ‰§è¡Œé«˜é˜¶å‡½æ•°ï¼Œæ³¨æ„è¿™é‡Œä½¿ç”¨ï¼šå˜é‡+() å½¢å¼è°ƒç”¨
   //block.invoke(Shape())// ç­‰åŒ
}

class MainActivity : AppCompatActivity() {
    // é«˜é˜¶å‡½æ•°ä½œä¸ºæˆå‘˜å˜é‡
    var te :(String)->Unit = {}
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

     // 1ã€æ‰§è¡Œæ‰©å±•å‡½æ•°
     // lambda ä»£è¡¨Shapeç±»çš„æ‰©å±•å‡½æ•°ç±»å‹ï¼Œæ‰€ä»¥è¿™é‡Œlambdaä¸­é»˜è®¤å…·æœ‰æ‰©å±•ç±»çš„ä¸Šä¸‹æ–‡ã€‚è¿™é‡Œthis ä»£è¡¨ Shape
        Shape().test {
          println("block å—")
        }

      // é«˜é˜¶å‡½æ•°èµ‹å€¼
        te = {
            println(it)
        }
      // 2ã€æ‰§è¡Œé«˜é˜¶å‡½æ•°
        te.invoke("aaa") // ä½¿ç”¨invokeæ‰§è¡Œ
      //te("aaa") ç­‰åŒ
    }
}
```

è¿™é‡Œç•™æ„ä¸‹é«˜é˜¶å‡½æ•°è°ƒç”¨æ–¹å¼ï¼Œä½¿ç”¨invokeã€å˜é‡å()æ–¹å¼æ˜¯ä¸€è‡´çš„ï¼Œå°±å½“å›é¡¾ä¸‹çŸ¥è¯†ç‚¹å’¯~

# æ”¶è·

å¯¹é«˜é˜¶å‡½æ•°ï¼Œæ‰©å±•å‡½æ•°ã€è‡ªå®šä¹‰getã€set æœ‰æœ‰äº†æ·±åˆ»è®¤è¯†~

[å®˜æ–¹æ–‡æ¡£](https://www.kotlincn.net/docs/reference/extensions.html)
